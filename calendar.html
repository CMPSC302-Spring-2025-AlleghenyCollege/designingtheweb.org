<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="css/styles.css" />
  <title>Snapshot Calendar</title>
  <style>
    #days-of-week, #date-grid {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
    }
    .day {
      border: 1px solid #ddd;
      padding: 10px;
      min-height: 60px;
    }
    .special {
      background-color: #fce4ec;
    }
    .controls {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin: 10px 0;
    }
    .view-toggle {
      margin-left: auto;
    }
  </style>
</head>

<body>
  <div class="calendar-container">
    <div id="calendar">
      <div class="navigation controls">
        <button class="nav-button" id="prev">Previous</button>
        <div id="month-year">Month Year</div>
        <button class="nav-button" id="next">Next</button>
        <select id="view-select" class="view-toggle">
          <option value="month">Month View</option>
          <option value="week">Week View</option>
        </select>
      </div>
      <div id="line"></div>
      <div id="days-of-week">
        <div>Sun</div>
        <div>Mon</div>
        <div>Tue</div>
        <div>Wed</div>
        <div>Thu</div>
        <div>Fri</div>
        <div>Sat</div>
      </div>
      <div id="date-grid"></div>
    </div>
  </div>

  <script>
    document.addEventListener("DOMContentLoaded", function () {
      const monthYearElement = document.getElementById("month-year");
      const dateGridElement = document.getElementById("date-grid");
      const prevButton = document.getElementById("prev");
      const nextButton = document.getElementById("next");
      const viewSelect = document.getElementById("view-select");

      let currentDate = new Date();
      let currentView = "month";

      function renderCalendar() {
        dateGridElement.innerHTML = "";
        const monthNames = [
          "January", "February", "March", "April", "May", "June",
          "July", "August", "September", "October", "November", "December"
        ];
        monthYearElement.textContent = `${monthNames[currentDate.getMonth()]} ${currentDate.getFullYear()}`;

        if (currentView === "month") {
          renderMonthView();
        } else {
          renderWeekView();
        }
      }

      function renderMonthView() {
        const firstDay = new Date(currentDate.getFullYear(), currentDate.getMonth(), 1);
        const lastDay = new Date(currentDate.getFullYear(), currentDate.getMonth() + 1, 0);
        const daysInMonth = lastDay.getDate();
        const startingDay = firstDay.getDay();

        for (let i = 0; i < startingDay; i++) {
          const emptyDay = document.createElement("div");
          emptyDay.classList.add("day");
          dateGridElement.appendChild(emptyDay);
        }

        for (let day = 1; day <= daysInMonth; day++) {
          const date = new Date(currentDate.getFullYear(), currentDate.getMonth(), day);
          createDayElement(date);
        }
      }

      function renderWeekView() {
        const today = new Date(currentDate);
        const weekStart = new Date(today.setDate(today.getDate() - today.getDay())); // Start of week (Sunday)

        for (let i = 0; i < 7; i++) {
          const date = new Date(weekStart);
          date.setDate(weekStart.getDate() + i);
          createDayElement(date);
        }
      }

      function createDayElement(date) {
        const dayElement = document.createElement("div");
        dayElement.classList.add("day");
        dayElement.setAttribute("data-date", date.getDate());

        if (date.getDay() === 0 || date.getDay() === 6) {
          dayElement.classList.add("special");
          const eventElement = document.createElement("div");
          eventElement.classList.add("event-type");
          eventElement.textContent = "Weekend";
          dayElement.appendChild(eventElement);
        }

        // Show just the day number
        dayElement.insertAdjacentHTML("afterbegin", `<strong>${date.getDate()}</strong>`);

        const today = new Date();
        if (
          date.getDate() === today.getDate() &&
          date.getMonth() === today.getMonth() &&
          date.getFullYear() === today.getFullYear()
        ) {
          dayElement.style.backgroundColor = "#E3F2FD";
        }

        dateGridElement.appendChild(dayElement);
      }

      // Navigation buttons
      prevButton.addEventListener("click", function () {
        if (currentView === "month") {
          currentDate.setMonth(currentDate.getMonth() - 1);
        } else {
          currentDate.setDate(currentDate.getDate() - 7);
        }
        renderCalendar();
      });

      nextButton.addEventListener("click", function () {
        if (currentView === "month") {
          currentDate.setMonth(currentDate.getMonth() + 1);
        } else {
          currentDate.setDate(currentDate.getDate() + 7);
        }
        renderCalendar();
      });

      // View toggle
      viewSelect.addEventListener("change", function () {
        currentView = this.value;
        renderCalendar();
      });

      renderCalendar();
    });
  </script>
</body>

</html>
